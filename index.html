<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <title>Login Firebase Exemplo</title>
</head>
<body>
  <h2>Login</h2>
  <form id="loginForm">
    <input type="email" id="email" placeholder="Email" required/>
    <input type="password" id="password" placeholder="Password" required/>
    <button type="submit">Entrar</button>
  </form>
  <div id="mensagem"></div>

  <script type="module">
    // Importa dos módulos CDN
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.1.2/firebase-app.js";
    import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.1.2/firebase-auth.js";
    
    // Configuração corrigida do Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyAC9EguGeZd50W1jADEx73aJKGacFeGk9o",
      authDomain: "bddespesas.firebaseapp.com",
      projectId: "bddespesas",
      storageBucket: "bddespesas.appspot.com", // corrigido!
      messagingSenderId: "521648200265",
      appId: "1:521648200265:web:82fc2c97f02e185478fd98",
      measurementId: "G-P7NX1T9RVE"
    };

    // Inicializa Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    // login handler
    document.getElementById("loginForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;
      const msgDiv = document.getElementById("mensagem");

      try {
        const userCredential = await signInWithEmailAndPassword(auth, email, password);
        msgDiv.innerText = "Login realizado com sucesso!";
      } catch (error) {
        msgDiv.innerText = "Erro no login: " + error.message;
      }
    });
  </script>
</body>
</html>
